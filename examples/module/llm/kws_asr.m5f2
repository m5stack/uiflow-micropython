{"version":"V2.0","versionNumber":"V2.1.9","type":"cores3","components":[{"name":"screen","type":"screen","layer":0,"screenId":"builtin","screenName":"","id":"__cores3_screen","createTime":1734071633254,"x":0,"y":0,"width":320,"height":240,"backgroundColor":"#222222","size":0,"isSelected":true},{"name":"label0","type":"label","layer":1,"screenId":"builtin","screenName":"","id":"k!_4W!bYs9`s614&","createTime":1734072324430,"x":10,"y":25,"color":"#ffffff","backgroundColor":"#222222","text":"State","engine":"gfx","font":"Widgets.FONTS.DejaVu18","rotation":0,"isSelected":false},{"name":"label1","type":"label","layer":2,"screenId":"builtin","screenName":"","id":"d7P8TB5PM_uBIMKi","createTime":1734072327101,"x":10,"y":60,"color":"#ffffff","backgroundColor":"#222222","text":"~","engine":"gfx","font":"Widgets.FONTS.DejaVu18","rotation":0,"isSelected":false},{"name":"label2","type":"label","layer":3,"screenId":"builtin","screenName":"","id":"f1NJn6UHX7ajLMT%","createTime":1734072330334,"x":10,"y":100,"color":"#ffffff","backgroundColor":"#222222","text":"ASR input data:","engine":"gfx","font":"Widgets.FONTS.DejaVu18","rotation":0,"isSelected":false},{"name":"label3","type":"label","layer":4,"screenId":"builtin","screenName":"","id":"s!gfhD8Zu5+LY9XR","createTime":1734072337030,"x":10,"y":140,"color":"#ffffff","backgroundColor":"#222222","text":"~","engine":"gfx","font":"Widgets.FONTS.DejaVu18","rotation":0,"isSelected":false}],"resources":[{"hardware":["hardware_button","hardware_pin_button","imu","speaker","touch","als","mic"]},{"module":["module_llm"]}],"units":[],"hats":[],"bases":[],"i2cs":[],"blockly":"<variables><variable id=\"26j.]Zu;Kd1u_[z-s(GA\">k</variable></variables><block type=\"basic_on_setup\" id=\"setup_block\" deletable=\"false\" x=\"50\" y=\"50\"><mutation isBegin=\"true\"></mutation><field name=\"UPDATEOP\">true</field><statement name=\"FUNC\"><block type=\"system_m5_begin\" id=\"system_m5_begin\"><next><block type=\"module_llm_init\" id=\"$lab7ZX#e`_tXaWPBqBG\"><field name=\"NAME\">llm_0</field><value name=\"UART\"><shadow type=\"module_llm_id_option\" id=\"LYaGA9:X]_6l3zI%qfv*\"><field name=\"VALUE\">2</field></shadow></value><value name=\"TX\"><shadow type=\"module_llm_tx_option\" id=\"(e87lNSoWes5,_}8cA[P\"><field name=\"VALUE\">17</field></shadow></value><value name=\"RX\"><shadow type=\"module_llm_rx_option\" id=\";Pi?5_@YKIw2CdFLe*,m\"><field name=\"VALUE\">18</field></shadow></value><next><block type=\"label_set_text\" id=\"AEV}T/!QlVS#N`;G*Hlv\"><field name=\"NAME\">label1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"44.oHH;maL8T?L:DV|Sj\"><field name=\"TEXT\">Wait ModuleLLM connection..</field></shadow></value><next><block type=\"controls_whileUntil\" id=\"{j#`{eK`YPin%MH*,?3]\"><field name=\"MODE\">UNTIL</field><value name=\"BOOL\"><block type=\"module_llm_check_connection\" id=\"(^,KJq_YZ~~TA,fzb1+T\"><field name=\"NAME\">llm_0</field></block></value><statement name=\"DO\"><block type=\"time_sleep_second\" id=\"{13d.L8QlK4a]SN3!29@\"><value name=\"SECOND\"><shadow type=\"math_number\" id=\"di,jt;EO`64]RPI9XiB[\"><mutation max=\"Infinity\" min=\"0\" precision=\"0\"></mutation><field name=\"NUM\">1</field></shadow></value></block></statement><next><block type=\"label_set_text\" id=\"bxW`tVIAMj,#ac?HcRh`\"><field name=\"NAME\">label1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"/Slbv}?;$h[*9qeLI5ps\"><field name=\"TEXT\">Reset ModuleLLM..</field></shadow></value><next><block type=\"module_llm_sys_reset\" id=\"6Ek6b:+]h3Poeq_7lY4q\"><field name=\"NAME\">llm_0</field><field name=\"VALUE\">True</field><next><block type=\"label_set_text\" id=\"KE#FD=mV5%C?}}Dm[Oig\"><field name=\"NAME\">label1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"QoM^M10uh^B.dQx[RDtf\"><field name=\"TEXT\">Setup Audio module..</field></shadow></value><next><block type=\"module_llm_audio_setup\" id=\"CNLT#*2X@*^bVyX(b=uc\"><field name=\"NAME\">llm_0</field><value name=\"CAP_VOLUME\"><shadow type=\"math_number\" id=\"QrZm].-!F6ehyy{xUe7v\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">0.5</field></shadow></value><value name=\"PLAY_VOLUME\"><shadow type=\"math_number\" id=\"ae`8U8*AWHKWbX00#W/o\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">0.15</field></shadow></value><value name=\"REQUEST_ID\"><shadow type=\"text\" id=\"zGT[6h_pYt8*8=yW8ge@\"><field name=\"TEXT\">audio_setup</field></shadow></value><next><block type=\"label_set_text\" id=\"Y6IB^%*?T%Hv*Np7HP=g\"><field name=\"NAME\">label1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"HfBM7?%2YhzPwFPsPWgL\"><field name=\"TEXT\">Setup KWS module..</field></shadow></value><next><block type=\"module_llm_kws_setup\" id=\"`sN)#bHE@)v-Vgw3p_13\"><field name=\"NAME\">llm_0</field><value name=\"KEYWORD\"><shadow type=\"text\" id=\"ZBA/Eycm#yo)C8[.^BQO\"><field name=\"TEXT\">HI JIMMY</field></shadow></value><value name=\"MODEL\"><shadow type=\"module_llm_kws_model_option\" id=\"x?fo)69)Sle:]{x](QIC\"><mutation kwsValue=\"gigaspeech\"></mutation><field name=\"VALUE\">sherpa-onnx-kws-zipformer-gigaspeech-3.3M-2024-01-01</field></shadow></value><value name=\"ENOUTPUT\"><shadow type=\"module_llm_bool_option\" id=\"i:KG/[p$b.Uf?Wbie#/Q\"><field name=\"VALUE\">True</field></shadow></value><value name=\"ENAUDIO\"><shadow type=\"module_llm_bool_option\" id=\"KLv*KH);yxg0a}s3.ns^\"><field name=\"VALUE\">True</field></shadow></value><value name=\"ID\"><shadow type=\"text\" id=\"^Nc*x/j9G[cR:6_3mLri\"><field name=\"TEXT\">kws_setup</field></shadow></value><next><block type=\"label_set_text\" id=\"0G$^@A$?D_.xF@xpJLcQ\"><field name=\"NAME\">label1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"w^HYECgg}9RF12byOKng\"><field name=\"TEXT\">Setup ASR module..</field></shadow></value><next><block type=\"module_llm_asr_setup\" id=\"ko{mY$U+L8QV2mG`4.H5\"><field name=\"NAME\">llm_0</field><value name=\"MODEL\"><shadow type=\"module_llm_asr_model_option\" id=\"rU{3Nq3=dMjU3i0nLby#\"><field name=\"VALUE\">sherpa-ncnn-streaming-zipformer-20M-2023-02-17</field></shadow></value><value name=\"ENOUTPUT\"><shadow type=\"module_llm_bool_option\" id=\"Dw@Q#cwbyp5@RJ3k+B6#\"><field name=\"VALUE\">True</field></shadow></value><value name=\"ENKWS\"><shadow type=\"text\" id=\"4z0J0~04YTqY_R-25S%N\"><field name=\"TEXT\"></field></shadow><block type=\"module_llm_get_latest_kws_work_id\" id=\"7N{wtOU|,:CCl0-6O/(?\"><field name=\"NAME\">llm_0</field></block></value><value name=\"TIMEOUT1\"><shadow type=\"math_number\" id=\"CD*u2~:pTYl/z-hU%L+b\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">2.4</field></shadow></value><value name=\"TIMEOUT2\"><shadow type=\"math_number\" id=\"rg|@{%w^`q,jqV~{ra`2\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">1.2</field></shadow></value><value name=\"TIMEOUT3\"><shadow type=\"math_number\" id=\"#/W*8[.6mJ1SEf6hBPHB\"><mutation max=\"Infinity\" min=\"-Infinity\" precision=\"0\"></mutation><field name=\"NUM\">30</field></shadow></value><value name=\"ID\"><shadow type=\"text\" id=\"nK0H;)bkUM%4)vjoonNL\"><field name=\"TEXT\">asr_setup</field></shadow></value><next><block type=\"label_set_text\" id=\"=e5|7YTEN3xl%~;mda4b\"><field name=\"NAME\">label1</field><value name=\"TEXT\"><shadow type=\"text\" id=\"q8g~?PUb;Q|T*9FB/[s(\"><field name=\"TEXT\">OK</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"basic_on_loop\" id=\"loop_block\" deletable=\"false\" x=\"450\" y=\"50\"><mutation isUpdate=\"false\"></mutation><field name=\"UPDATEOP\">false</field><statement name=\"FUNC\"><block type=\"module_llm_tick\" id=\"OQ??TP`hY/OLPMts,zzJ\"><field name=\"NAME\">llm_0</field><next><block type=\"procedures_callnoreturn\" id=\"H?W:C6S+2T*r`LHZwvyT\"><mutation name=\"handle ModuleLLM response msg\"></mutation><next><block type=\"module_llm_clear_response_msg_list\" id=\"uwmhMH;nrbfAa%{6ODX9\"><field name=\"NAME\">llm_0</field></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"h3DkvP3@Uyf#FXil60PU\" x=\"810\" y=\"50\"><field name=\"NAME\">handle ModuleLLM response msg</field><comment pinned=\"false\" h=\"80\" w=\"160\">Describe this function...</comment><statement name=\"STACK\"><block type=\"controls_forEach\" id=\"[i.nc{`9t3gYTh-?lI*p\"><field name=\"VAR\" id=\"26j.]Zu;Kd1u_[z-s(GA\">k</field><value name=\"LIST\"><block type=\"module_llm_get_response_msg_list\" id=\"Hh7/-3M|2c|%]=sV!-=$\"><field name=\"NAME\">llm_0</field></block></value><statement name=\"DO\"><block type=\"controls_if\" id=\"}~XPM)S6q6doRWB]jdq-\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"81@R3tquYz^sL}]SdCVW\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"map_get_key\" id=\"]]hd88[HQok0bpc+AA+0\"><value name=\"KEY\"><block type=\"text\" id=\",cSp~LG=}VB|2$t{Ef^Z\"><field name=\"TEXT\">work_id</field></block></value><value name=\"MAP\"><block type=\"variables_get\" id=\"x+/C*wUT=Gqbi1t4~5W^\"><field name=\"VAR\" id=\"26j.]Zu;Kd1u_[z-s(GA\">k</field></block></value></block></value><value name=\"B\"><block type=\"module_llm_get_latest_asr_work_id\" id=\"NgnjJpKV+%myHk0/jQ=U\"><field name=\"NAME\">llm_0</field></block></value></block></value><statement name=\"DO0\"><block type=\"label_set_text\" id=\".J|3MS.s4I7pARiXK?A3\"><field name=\"NAME\">label3</field><value name=\"TEXT\"><shadow type=\"text\" id=\"`Gvo2K9wOU1W_fsXWpPS\"><field name=\"TEXT\">Label</field></shadow><block type=\"map_get_key\" id=\"@v.T.8k{]M5j+%:Mzm@A\"><value name=\"KEY\"><block type=\"text\" id=\"GP|2DD.Sf^[y9w5gw2X-\"><field name=\"TEXT\">delta</field></block></value><value name=\"MAP\"><block type=\"map_get_key\" id=\"8m79yD+iPXD~mGJptfUj\"><value name=\"KEY\"><block type=\"text\" id=\"2IB4wcab19d[T!PV$.Xn\"><field name=\"TEXT\">data</field></block></value><value name=\"MAP\"><block type=\"variables_get\" id=\"ABOob-%9)cfZq-dP3lKa\"><field name=\"VAR\" id=\"26j.]Zu;Kd1u_[z-s(GA\">k</field></block></value></block></value></block></value></block></statement></block></statement></block></statement></block>","screen":[{"simulationName":"Built-in","type":"builtin","width":320,"height":240,"scale":0.78,"screenName":"","blockId":"","screenColorType":0,"id":"builtin","createTime":1734071633253}],"logicWhenNum":0,"customList":[]}